provide(function(t){using("lib/component","lib/utils",function(e,n){describe("(Core) utils",function(){describe("toArray()",function(){it("converts object to an array",function(){function t(){e=n.toArray(arguments)}var e;t("apple","pear"),expect(Array.isArray(e)).toBe(!0),expect(e[0]).toBe("apple"),expect(e[1]).toBe("pear"),expect(typeof e.push).toBe("function"),expect(typeof e.slice).toBe("function"),expect(typeof e.splice).toBe("function")}),it("preserves object length",function(){function t(){e=n.toArray(arguments)}var e;t("apple","pear"),expect(e.length).toBe(2)}),it('ignores elements before the "from" argument',function(){function t(){e=n.toArray(arguments,1)}var e;t("apple","pear"),expect(e.length).toBe(1),expect(e[0]).toBe("pear")})}),describe("merge()",function(){var t,e,i,r;beforeEach(function(){e={a:32,b:{aa:33,bb:94}},i={c:44},r={b:{aa:37,cc:58},d:78}}),it("creates a copy",function(){t=n.merge(e),t="monkey",expect(e.a).toBe(32)}),it("merges distinct properties",function(){t=n.merge(e,i),expect(t.a).toBe(32),expect(t.b.aa).toBe(33),expect(t.b.bb).toBe(94),expect(t.c).toBe(44)}),it("recursively merges like properties upon request",function(){t=n.merge(e,r,!0),expect(t.a).toBe(32),expect(t.b.aa).toBe(37),expect(t.b.bb).toBe(94),expect(t.b.cc).toBe(58),expect(t.d).toBe(78)}),it("does not recursively merge when not requested",function(){t=n.merge(e,r),expect(t.a).toBe(32),expect(t.b.aa).toBe(37),expect(t.b.bb).toBe(void 0),expect(t.b.cc).toBe(58),expect(t.d).toBe(78)}),it("merges more than two objects",function(){t=n.merge(e,i,r,!0),expect(t.a).toBe(32),expect(t.b.aa).toBe(37),expect(t.b.bb).toBe(94),expect(t.b.cc).toBe(58),expect(t.c).toBe(44),expect(t.d).toBe(78)}),it("copies extra when base is undefined",function(){t=n.merge(void 0,e),expect(t).toEqual(e)}),it("copies base when extra is undefined",function(){t=n.merge(r,void 0),expect(t).toEqual(r)})}),describe("isDomObj()",function(){it("distinguishes DOM objects from other values",function(){var t=document.createElement("DIV");document.body.appendChild(t),expect(n.isDomObj(window)).toBe(!0),expect(n.isDomObj(document)).toBe(!0),expect(n.isDomObj(document.body)).toBe(!0),expect(n.isDomObj(t)).toBe(!0),expect(n.isDomObj(alert)).toBe(!1),expect(n.isDomObj({})).toBe(!1),expect(n.isDomObj([1,2,3])).toBe(!1),expect(n.isDomObj("banana")).toBe(!1),expect(n.isDomObj("34")).toBe(!1),expect(n.isDomObj(!0)).toBe(!1),document.body.removeChild(t),t=null})}),describe("push()",function(){var t={a:32,b:{aa:33,bb:94}},e={c:44},i={b:{aa:37,cc:58},d:78};it("merges distinct properties",function(){var i=n.push(t,e);expect(i.a).toBe(32),expect(i.b.aa).toBe(33),expect(i.b.bb).toBe(94),expect(i.c).toBe(44)}),it("does not overwrite properties when protect is true",function(){expect(function(){n.push(t,i,!0)}).toThrow("utils.push attempted to overwrite 'b' while running in protected mode")}),it("recursively merges like properties when protect is false",function(){var e=n.push(t,i);expect(e.a).toBe(32),expect(e.b.aa).toBe(37),expect(e.b.bb).toBe(94),expect(e.b.cc).toBe(58),expect(e.d).toBe(78)}),it("returns undefined when base is undefined",function(){var e=n.push(void 0,t);expect(e).toBe(void 0)}),it("returns base when extra is undefined",function(){var t=n.push(i,void 0);expect(t).toBe(i)})})}),describe("throttle()",function(){it("should only call a throttled function once per interval",function(){jasmine.Clock.useMock();var t=jasmine.createSpy(),e=n.throttle(t,500);e(),expect(t.callCount).toBe(1),e(),expect(t.callCount).toBe(1),jasmine.Clock.tick(499),expect(t.callCount).toBe(1),jasmine.Clock.tick(1),expect(t.callCount).toBe(2)})}),describe("debounce()",function(){it("should only call a debounce'd function after it has not been called for a given interval",function(){jasmine.Clock.useMock();var t=jasmine.createSpy(),e=n.debounce(t,500);e(),jasmine.Clock.tick(400),expect(t).not.toHaveBeenCalled(),e(),jasmine.Clock.tick(600),expect(t).toHaveBeenCalled()})}),describe("delegate()",function(){var t=function(){return e(function(){})}();afterEach(function(){t.teardownAll()}),it("should pass event, and data (inc. el property) to its callbacks",function(){var e=new t(document,{bodySelector:"body"}),n={blah:"blah"};jasmine.Clock.useMock();var i=jasmine.createSpy();e.on("click",{bodySelector:i}),$(document.body).trigger("click",n),n.el=document.body,i.mostRecentCall.args,expect(i).toHaveBeenCalledWith(jasmine.any($.Event),n)}),it('makes "this" in delegated function references be the component instance',function(){var e=new t(document,{bodySelector:"body"});e.on("click",{bodySelector:function(){expect(this).toBe(e)}}),$(document.body).trigger("click")}),t.teardownAll()}),t(1)})});